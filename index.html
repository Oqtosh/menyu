<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!-- SEO -->
    <title>OQTOSH | Qashqadaryo Milliy Taomlari - Yakkabog' Restorani</title>
    <meta name="description" content="OQTOSH Restorani â€” Yakkabog'dagi haqiqiy Qashqadaryo milliy taomlari maskani. Bizda eng mazali kaboblar, tandir go'shti va shinam muhit sizni kutmoqda.">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root {
            --gold: #c5a059;
            --dark: #121212;
            --chocolate: #2b1d0e;
            --light: #f8f5f0;
            --white: #ffffff;
            --gray: #a9a9a9;
            --edit-bg: #4a3728;
            --success: #28a745;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--chocolate);
            color: var(--light);
            line-height: 1.6;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, .brand { font-family: 'Playfair Display', serif; }

        /* Navigation */
        nav {
            position: fixed; top: 0; width: 100%; padding: 15px 5%;
            display: flex; justify-content: space-between; align-items: center;
            z-index: 1000; transition: 0.5s; background: rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
        }
        nav.sticky { padding: 10px 5%; background: rgba(0,0,0,0.9); box-shadow: 0 5px 20px rgba(0,0,0,0.5); }

        .brand {
            color: var(--white);
            font-size: 1.5rem;
            text-decoration: none;
            font-weight: 700;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .nav-logo { height: 40px; width: auto; }

        nav ul { display: flex; list-style: none; }
        nav ul li a { color: var(--white); text-decoration: none; margin-left: 20px; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }

        /* Hero Section */
        .hero {
            position: relative; height: 85vh;
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
                        url('https://images.unsplash.com/photo-1529193591184-b1d58b34ecdf?auto=format&fit=crop&w=1920&q=80');
            background-size: cover; background-position: center; background-attachment: fixed;
            display: flex; justify-content: center; align-items: center; text-align: center; color: var(--white);
            padding: 0 20px;
        }

        .hero-logo {
            max-width: 380px;
            width: 100%;
            height: auto;
            margin-bottom: 25px;
            filter: drop-shadow(0 0 25px rgba(0,0,0,0.6));
        }

        .hero-content p { font-size: 1.3rem; letter-spacing: 4px; text-transform: uppercase; opacity: 0.9; font-weight: 500; color: var(--gold); }

        /* Menu Section */
        section { padding: 80px 5%; }
        .section-title {
            text-align: center;
            margin-bottom: 50px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        .section-title h2 {
            font-size: 2.5rem;
            color: var(--gold);
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .title-logo { height: 45px; width: auto; }
        .section-title .divider { width: 80px; height: 2px; background: var(--gold); margin: 0 auto; }

        /* Menu Tabs */
        .menu-tabs {
            display: flex; justify-content: flex-start; gap: 10px; margin-bottom: 50px;
            overflow-x: auto; padding-bottom: 10px; scrollbar-width: none;
        }
        .menu-tabs::-webkit-scrollbar { display: none; }

        .tab-btn {
            padding: 12px 25px; border: 1px solid var(--gold); background: transparent;
            color: var(--light); cursor: pointer; text-transform: uppercase;
            font-size: 0.8rem; white-space: nowrap; border-radius: 5px; transition: 0.3s;
        }
        .tab-btn.active { background: var(--gold); color: var(--chocolate); font-weight: 600; }

        /* Categories */
        .menu-category { display: none; margin-bottom: 50px; }
        .menu-category.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .category-header { display: flex; align-items: center; margin-bottom: 30px; }
        .category-header h3 {
            font-size: 1.8rem;
            color: var(--gold);
            white-space: nowrap;
            margin-right: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .category-logo { height: 30px; width: auto; opacity: 0.8; }
        .category-header .line { flex-grow: 1; height: 1px; background: rgba(197, 160, 89, 0.3); }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px 50px;
        }

        .menu-item { display: flex; justify-content: space-between; align-items: baseline; position: relative; padding: 12px 0; border-bottom: 1px solid rgba(197, 160, 89, 0.1); }
        .item-info h4 { font-size: 1.1rem; text-transform: uppercase; color: var(--white); margin-bottom: 5px; }
        .item-info p { font-size: 0.85rem; color: var(--gray); font-style: italic; }
        .item-price { color: var(--gold); font-weight: 600; font-size: 1.1rem; margin-left: 15px; min-width: 90px; text-align: right; }

        /* Admin/Buttons */
        .add-item-btn { display: none; margin-left: 15px; background: var(--success); color: white; border: none; padding: 6px 15px; border-radius: 3px; cursor: pointer; font-size: 0.75rem; text-transform: uppercase; }
        .delete-item { display: none; color: #ff4d4d; cursor: pointer; margin-left: 15px; font-size: 1.1rem; }
        [contenteditable="true"] { outline: 1px dashed var(--gold); background-color: var(--edit-bg) !important; padding: 2px 5px; }

        .admin-controls { position: fixed; bottom: 25px; right: 25px; z-index: 2000; display: flex; flex-direction: column; gap: 12px; align-items: flex-end; }
        .admin-btn { width: 60px; height: 60px; border-radius: 50%; background: var(--gold); color: var(--chocolate); border: none; cursor: pointer; display: flex; justify-content: center; align-items: center; font-size: 1.4rem; box-shadow: 0 5px 20px rgba(0,0,0,0.6); transition: 0.3s; }
        .admin-btn:hover { transform: scale(1.1); }

        #copy-btn { display: none; background: var(--success); color: white; }
        .save-hint { display: none; background: rgba(0,0,0,0.95); color: white; padding: 20px; border-radius: 12px; font-size: 0.85rem; max-width: 280px; margin-bottom: 15px; border: 1px solid var(--gold); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }

        footer { background: #1a1108; color: var(--gray); padding: 50px 5% 25px; text-align: center; border-top: 1px solid rgba(197, 160, 89, 0.2); }
        .copyright { border-top: 1px solid rgba(255,255,255,0.05); padding-top: 25px; font-size: 0.8rem; }

        @media (max-width: 768px) {
            .hero { height: 60vh; }
            .hero-logo { max-width: 280px; }
            .menu-grid { grid-template-columns: 1fr; }
            nav ul { display: none; }
            .section-title h2 { font-size: 2rem; }
            .title-logo { height: 35px; }
            .category-logo { height: 25px; }
        }
    </style>
</head>
<body>

    <nav id="navbar">
        <a href="#" class="brand">
            <img src="logo.png" alt="Logo" class="nav-logo">
            OQTOSH
        </a>
        <ul><li><a href="#menu">Menyu</a></li><li><a href="#contact">Aloqa</a></li></ul>
    </nav>

    <section class="hero" id="home">
        <div class="hero-content" data-aos="fade-up">
            <p>Xush kelibsiz</p>
            <img src="logo.png" alt="Oqtosh Logo" class="hero-logo">
            <p style="color: var(--gold); font-weight: 600;">Qashqadaryo Milliy Taomlari</p>
        </div>
    </section>

    <section id="menu">
        <div class="section-title" data-aos="fade-up">
            <h2>
                <img src="logo.png" alt="Logo" class="title-logo">
                Bizning Menyu
            </h2>
            <div class="divider"></div>
        </div>

        <div class="menu-tabs" id="tabs-container"></div>
        <div id="menu-container">
            <p style="text-align: center; color: var(--gold); padding: 40px;">Menyu yuklanmoqda...</p>
        </div>
    </section>

    <div class="admin-controls">
        <div class="save-hint" id="save-hint">
            <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px; color:var(--gold); font-weight:bold;">
                <img src="logo.png" alt="Logo" style="height:25px;">
                ADMIN PANEL
            </div>
            1. Matnlarni tahrirlang.<br>
            2. OK (Check) tugmasini bosing.<br>
            3. O'zgarishlar hamma mijozlarda saqlanadi.
        </div>
        <button class="admin-btn" id="copy-btn" title="Kodni nusxalash" onclick="copyUpdatedHTML()"><i class="fas fa-copy"></i></button>
        <button class="admin-btn" id="edit-btn" title="Admin rejimi"><i class="fas fa-edit"></i></button>
    </div>

    <footer id="contact">
        <div style="margin-bottom: 20px;">
            <img src="logo.png" alt="Logo" style="height:60px; margin-bottom:15px; opacity:0.8;">
        </div>
        <p>Qashqadaryo viloyati, Yakkabog' tumani, Oqtosh MFY | Tel: +998 90 444 17 71</p>
        <div class="copyright">&copy; 2024 OQTOSH RESTAURANT.</div>
    </footer>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBGIoJu9Tc2Ve__BJeJmM2HsWHopdkk9YY",
            authDomain: "mydevicescontroller.firebaseapp.com",
            databaseURL: "https://mydevicescontroller-default-rtdb.firebaseio.com",
            projectId: "mydevicescontroller",
            storageBucket: "mydevicescontroller.firebasestorage.app",
            appId: "1:678615722465:android:55a7e86b4657ec57d78aa0"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const menuRef = ref(db, 'restaurant_menu_data_v2');

        let menuData = [];
        let isEditMode = false;
        const container = document.getElementById('menu-container');
        const tabsBox = document.getElementById('tabs-container');

        onValue(menuRef, (snapshot) => {
            if (snapshot.exists()) {
                menuData = snapshot.val();
                renderMenu();
            }
        });

        function renderMenu(filter = 'Barchasi') {
            container.innerHTML = '';
            tabsBox.innerHTML = `<button class="tab-btn ${filter==='Barchasi'?'active':''}" onclick="renderMenu('Barchasi')">Barchasi</button>`;

            menuData.forEach((group, gIdx) => {
                tabsBox.innerHTML += `<button class="tab-btn ${filter===group.cat?'active':''}" onclick="renderMenu('${group.cat}')">${group.cat}</button>`;
                if (filter !== 'Barchasi' && filter !== group.cat) return;

                const catDiv = document.createElement('div');
                catDiv.className = 'menu-category active';
                catDiv.innerHTML = `
                    <div class="category-header">
                        <h3>
                            <img src="logo.png" alt="Logo" class="category-logo">
                            ${group.cat}
                        </h3>
                        <div class="line"></div>
                        <button class="add-item-btn" style="display:${isEditMode?'block':'none'}" onclick="addNew(${gIdx})">+ Qo'shish</button>
                    </div>
                    <div class="menu-grid">
                        ${group.items.map((it, iIdx) => `
                            <div class="menu-item">
                                <div class="item-info">
                                    <h4 class="edit-text" contenteditable="${isEditMode}" oninput="updateData(${gIdx},${iIdx},'n',this.innerText)">${it.n}</h4>
                                    <p class="edit-text" contenteditable="${isEditMode}" oninput="updateData(${gIdx},${iIdx},'d',this.innerText)">${it.d}</p>
                                </div>
                                <div class="item-price edit-text" contenteditable="${isEditMode}" oninput="updateData(${gIdx},${iIdx},'p',this.innerText)">${it.p}</div>
                                <i class="fas fa-trash-alt delete-item" style="display:${isEditMode?'block':'none'}" onclick="remove(${gIdx},${iIdx})"></i>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(catDiv);
            });
        }
        window.renderMenu = renderMenu;

        window.updateData = (g, i, field, val) => { menuData[g].items[i][field] = val; };
        window.addNew = (gIdx) => { menuData[gIdx].items.push({n:"Yangi taom", d:"Tarkibi", p:"0"}); renderMenu(); };
        window.remove = (g, i) => { if(confirm("O'chirilsinmi?")) { menuData[g].items.splice(i, 1); renderMenu(); } };

        const editBtn = document.getElementById('edit-btn');
        let pressTimer;

        editBtn.addEventListener('mousedown', () => {
            if (isEditMode) return;
            pressTimer = setTimeout(() => {
                if (prompt("Parol:") === "superadmin") { isEditMode = true; toggleUI(); }
            }, 1000);
        });
        editBtn.addEventListener('mouseup', () => clearTimeout(pressTimer));
        editBtn.addEventListener('click', () => {
            if (isEditMode) {
                isEditMode = false;
                set(menuRef, menuData).then(() => alert("Bazaga saqlandi!"));
                toggleUI();
            }
        });

        function toggleUI() {
            document.getElementById('save-hint').style.display = isEditMode ? 'block' : 'none';
            document.getElementById('copy-btn').style.display = isEditMode ? 'none' : 'flex';
            editBtn.innerHTML = isEditMode ? '<i class="fas fa-check"></i>' : '<i class="fas fa-edit"></i>';
            renderMenu();
        }

        window.copyUpdatedHTML = () => {
            navigator.clipboard.writeText('<!DOCTYPE html>\n' + document.documentElement.outerHTML).then(() => alert("Nusxalandi!"));
        };

        window.addEventListener("scroll", () => {
            document.querySelector("nav").classList.toggle("sticky", window.scrollY > 0);
        });

        AOS.init({ duration: 1000, once: true });
    </script>
</body>
</html>
